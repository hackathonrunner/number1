var requirejs,require,define;!function(t){function e(t,e){var i,n,s,a,o,r,c,u,h,l=e&&e.split("/"),d=p.map,f=d&&d["*"]||{};if(t&&"."===t.charAt(0)&&e){for(l=l.slice(0,l.length-1),t=l.concat(t.split("/")),u=0;u<t.length;u+=1)if(i=t[u],"."===i)t.splice(u,1),u-=1;else if(".."===i){if(1===u&&(".."===t[2]||".."===t[0]))break;u>0&&(t.splice(u-1,2),u-=2)}t=t.join("/")}if((l||f)&&d){for(i=t.split("/"),u=i.length;u>0;u-=1){if(n=i.slice(0,u).join("/"),l)for(h=l.length;h>0;h-=1)if((s=d[l.slice(0,h).join("/")])&&(s=s[n])){a=s,o=u;break}if(a)break;!r&&f&&f[n]&&(r=f[n],c=u)}!a&&r&&(a=r,o=c),a&&(i.splice(0,o,a),t=i.join("/"))}return t}function i(e,i){return function(){return c.apply(t,v.call(arguments,0).concat([e,i]))}}function n(t){return function(i){return e(i,t)}}function s(t){return function(e){l[t]=e}}function a(e){if(g.call(d,e)){var i=d[e];delete d[e],f[e]=!0,r.apply(t,i)}if(!g.call(l,e)&&!g.call(f,e))throw Error("No "+e);return l[e]}function o(t){var e,i=t?t.indexOf("!"):-1;return i>-1&&(e=t.substring(0,i),t=t.substring(i+1,t.length)),[e,t]}var r,c,u,h,l={},d={},p={},f={},g=Object.prototype.hasOwnProperty,v=[].slice;u=function(t,i){var s,r=o(t),c=r[0],t=r[1];return c&&(c=e(c,i),s=a(c)),c?t=s&&s.normalize?s.normalize(t,n(i)):e(t,i):(t=e(t,i),r=o(t),c=r[0],t=r[1],c&&(s=a(c))),{f:c?c+"!"+t:t,n:t,pr:c,p:s}},h={require:function(t){return i(t)},exports:function(t){var e=l[t];return"undefined"!=typeof e?e:l[t]={}},module:function(t){return{id:t,uri:"",exports:l[t],config:function(){return p&&p.config&&p.config[t]||{}}}}},r=function(e,n,o,r){var c,p,v,m,y,_=[],r=r||e;if("function"==typeof o){for(n=!n.length&&o.length?["require","exports","module"]:n,m=0;m<n.length;m+=1)if(v=u(n[m],r),p=v.f,"require"===p)_[m]=h.require(e);else if("exports"===p)_[m]=h.exports(e),y=!0;else if("module"===p)c=_[m]=h.module(e);else if(g.call(l,p)||g.call(d,p)||g.call(f,p))_[m]=a(p);else{if(!v.p)throw Error(e+" missing "+p);v.p.load(v.n,i(r,!0),s(p),{}),_[m]=l[p]}n=o.apply(l[e],_),e&&(c&&c.exports!==t&&c.exports!==l[e]?l[e]=c.exports:n===t&&y||(l[e]=n))}else e&&(l[e]=o)},requirejs=require=c=function(e,i,n,s,o){return"string"==typeof e?h[e]?h[e](i):a(u(e,i).f):(e.splice||(p=e,i.splice?(e=i,i=n,n=null):e=t),i=i||function(){},"function"==typeof n&&(n=s,s=o),s?r(t,e,i,n):setTimeout(function(){r(t,e,i,n)},15),c)},c.config=function(t){return p=t,c},define=function(t,e,i){e.splice||(i=e,e=[]),g.call(l,t)||(d[t]=[t,e,i])},define.amd={jQuery:!0}}(),define("libs/almond.min",function(){}),function(){var t=!1,e=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;this.Class=function(){},Class.extend=function(i){function n(){!t&&this.init&&this.init.apply(this,arguments)}var s=this.prototype;t=!0;var a=new this;t=!1;for(var o in i)a[o]="function"==typeof i[o]&&"function"==typeof s[o]&&e.test(i[o])?function(t,e){return function(){var i=this._super;this._super=s[t];var n=e.apply(this,arguments);return this._super=i,n}}(o,i[o]):i[o];return n.prototype=a,n.prototype.constructor=n,n.extend=arguments.callee,n}}(),define("libs/resig/Class",function(){});var id=function(t){return document.getElementById(t)};"undefined"==typeof document||"classList"in document.createElement("a")||!function(t){"use strict";if("HTMLElement"in t||"Element"in t){var e="classList",i="prototype",n=(t.HTMLElement||t.Element)[i],s=Object,a=String[i].trim||function(){return this.replace(/^\s+|\s+$/g,"")},o=Array[i].indexOf||function(t){for(var e=0,i=this.length;i>e;e++)if(e in this&&this[e]===t)return e;return-1},r=function(t,e){this.name=t,this.code=DOMException[t],this.message=e},c=function(t,e){if(""===e)throw new r("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(e))throw new r("INVALID_CHARACTER_ERR","String contains an invalid character");return o.call(t,e)},u=function(t){for(var e=a.call(t.className),i=e?e.split(/\s+/):[],n=0,s=i.length;s>n;n++)this.push(i[n]);this._updateClassName=function(){t.className=this.toString()}},h=u[i]=[],l=function(){return new u(this)};if(r[i]=Error[i],h.item=function(t){return this[t]||null},h.contains=function(t){return t+="",-1!==c(this,t)},h.add=function(){var t,e=arguments,i=0,n=e.length,s=!1;do t=e[i]+"",-1===c(this,t)&&(this.push(t),s=!0);while(++i<n);s&&this._updateClassName()},h.remove=function(){var t,e=arguments,i=0,n=e.length,s=!1;do{t=e[i]+"";var a=c(this,t);-1!==a&&(this.splice(a,1),s=!0)}while(++i<n);s&&this._updateClassName()},h.toggle=function(t,e){t+="";var i=this.contains(t),n=i?e!==!0&&"remove":e!==!1&&"add";return n&&this[n](t),!i},h.toString=function(){return this.join(" ")},s.defineProperty){var d={get:l,enumerable:!0,configurable:!0};try{s.defineProperty(n,e,d)}catch(p){-2146823252===p.number&&(d.enumerable=!1,s.defineProperty(n,e,d))}}else s[i].__defineGetter__&&n.__defineGetter__(e,l)}}(self),"forEach"in Array.prototype||(Array.prototype.forEach=function(t,e){for(var i=0,n=this.length;n>i;i++)i in this&&t.call(e,this[i],i,this)}),function(){if(!document.getElementsByClassName){var t=[].indexOf||function(t){for(var e=0;e<this.length;e++)if(this[e]===t)return e;return-1};getElementsByClassName=function(e,i){var n=document.querySelectorAll?i.querySelectorAll("."+e):function(){for(var n=i.getElementsByTagName("*"),s=[],a=0;a<n.length;a++)n[a].className&&(" "+n[a].className+" ").indexOf(" "+e+" ")>-1&&-1===t.call(s,n[a])&&s.push(n[a]);return s}();return n},document.getElementsByClassName=function(t){return getElementsByClassName(t,document)},Element.prototype.getElementsByClassName=function(t){return getElementsByClassName(t,this)}}}(),define("libs/shortcuts",function(){});var i18n=i18n||{};i18n.en={time:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],units:{days:["days","day"],minutes:["minutes","minute"],hours:["hours","hour"],seconds:["seconds","second"]}},strings:{left:"left",on:"on",at:"at",watchers:{event:"viewers now",mock:"viewers now"},expand:{event:"EXPAND TO WATCH",mock:"EXPAND TO WATCH"},click_expand:{event:"CLICK TO EXPAND",mock:"CLICK TO EXPAND"},click_here:{event:"CLICK TO WATCH",mock:"CLICK TO WATCH"}}},define("app/i18n/en",function(){}),define("app/helpers/Lang",[],function(){var t,e,i=[];return{config:function(n){e=n.get("layout"),i18n[n.get("language")]?(t=i18n[n.get("language")],i.forEach(function(e){e.callback.apply(e.scope,[t])}),i=[]):console.log("Language not supported")},time:function(e,i){var n=e;return t&&(n=t.time.units[e][i?0:1]),n},month:function(e){return t.time.months[e]},string:function(i){if(t){var n=t.strings[i];return"string"==typeof n?n:n[e]}return i},load:function(t,e){i.push({callback:t,scope:e})}}}),define("app/views/View",["../helpers/Lang"],function(t){return Class.extend({el:null,name:"",_tower:null,_subViews:[],forceLanguageUpdate:!1,callOnSubViews:function(t,e){this._subViews&&this._subViews.forEach(function(i){i&&i[t]&&i[t].apply(i,e)})},init:function(t,e){e=e||[],this.name=t,this.el=id(t),this._subViews&&this._subViews.length?e.forEach(function(t){this._subViews.push(t)},this):this._subViews=e},isLayout:function(t){return this._config.is("layout",t)},data:function(t){this._data=t,this.callOnSubViews("data",arguments)},tower:function(t){this._tower=t,this.callOnSubViews("tower",arguments)},config:function(t){this._config=t,this.callOnSubViews("config",arguments),this.handleLanguage(t)},handleLanguage:function(t){var e=this.lk,i=this.lang,n=function(t,e){return function(t){try{t.nodeValue=e}catch(i){console.log("IE ERR")}}};e&&(t.hasChanged("language")||t.hasChanged("layout")||this.forceLanguageUpdate)&&i.load(function(){var t;for(t in e)if(e.hasOwnProperty(t)){var i=e[t],s=this.lang.string(t);if(i.push)i.forEach(n(i,s));else try{e[t].nodeValue=" "+s}catch(a){console.log("IE ERR")}}this.forceLanguageUpdate=!1},this)},lang:t})}),define("app/helpers/DOM",[],function(){var t=document,e=window;return{setAttributes:function(t,e){var i;try{for(i in e)e.hasOwnProperty(i)&&("style"===i?t.style.cssText=e[i]:"innerHTML"===i?t.innerHTML=e[i]:t.setAttribute(i,e[i]))}catch(n){}return t},addEvent:function(t,e,i){t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent&&t.attachEvent("on"+e,i)},removeEvent:function(t,e,i){t.removeEventListener?t.removeEventListener(e,i,!1):t.detachEvent&&t.detachEvent("on"+e,i)},appendChildren:function(){var t,e=Array.prototype.slice.call(arguments),i=e.shift();for(t in e)e.hasOwnProperty(t)&&i.appendChild(e[t])},getScreenDim:function(){var i=e,n="inner";return i[n+"Width"]||(n="client",i=t.documentElement||t.body),{width:i[n+"Width"],height:i[n+"Height"]}},create:function(e,i,n){var s,a=t.createElement(e);if(i&&this.setAttributes(a,i),n)for(s in n)n.hasOwnProperty(s)&&this.addEvent(a,s,n[s]);return a},getHeightStyle:function(){return["height: ",this.getScreenDim().height,"px"].join("")}}}),define("app/views/Border",["./View","../helpers/DOM"],function(t,e){var i=t.extend({config:function(t){if(this._super(t),t.anyHasChanged(["size","layout","misc.border"])){var i=e.getScreenDim(),n="width: "+(i.width-2)+"px; height: "+(i.height-2)+"px;";"1"!==t.get("misc.border")&&(n+="display: none"),e.setAttributes(this.el,{style:n})}}});return new i("border")}),define("app/views/ExpandText",function(){}),define("app/helpers/Config",[],function(){var t="BANNER_CONFIG",e=window[t],i=null;return{hasLoaded:!0,init:function(t){t.on("cfc.setConfig",function(n){i=JSON.parse(JSON.stringify(e)),e=n,t.dispatch("config.loaded",[this])},this),t.dispatch("config.loaded",[this])},get:function(t){return this._get(t,e)},getOld:function(t){return this._get(t,i)},_get:function(t,e){return t?-1===t.indexOf(".")?e[t]:this._resolve(e,t):e},is:function(t,e){return this.get(t)===e},_resolve:function(t,e){var i,n=e.split(".");if(!t)return null;for(i=0;i<n.length;i++){if(!t[n[i]]){t=null;break}t=t[n[i]]}return t},anyHasChanged:function(t){var e=this,i=!1;return t.forEach(function(t){i||(i=e.hasChanged(t))}),i},hasChanged:function(t){if(i){var e=this.getOld(t),n=this.get(t),s=typeof n;return-1!==["array"].indexOf(s)?JSON.stringify(n)!==JSON.stringify(e):n!==e}return!0},getCDNDomain:function(){return"http://cdn.amp.live/"},getCDNPath:function(t){return t||(t=this.get("cdn_bucket")),this.getCDNDomain()+t+"/"},getCFPath:function(){return"//"+(this.get("cloudfront_domain")||"cdn.amp.live")+"/"}}}),define("app/helpers/ObjectID",[],function(){function t(e,i){return this instanceof t?(this.bigEndian=e,void(this.allowExceptions=i)):new t(e,i)}var e,i=[];for(e=0;64>e;e++)i[e]=Math.pow(2,e);t.warn=function(t){if(this.allowExceptions)throw new Error(t);return 1},t.decodeInt=function(t,e,n,s){var a=new this.Buffer(this.bigEndian||s,t),o=a.readBits(0,e),r=i[e];return n&&o>=r/2?o-r:o},t.encodeInt=function(t,e,n,s){var a=i[e];(t>=a||-(a/2)>t)&&(this.warn("encodeInt::overflow"),t=0),0>t&&(t+=a);for(var o=[];t;o[o.length]=String.fromCharCode(t%256),t=Math.floor(t/256));for(e=-(-e>>3)-o.length;e--;o[o.length]="\x00");return(this.bigEndian||s?o.reverse():o).join("")},t.toSmall=function(t){return this.decodeInt(t,8,!0)},t.fromSmall=function(t){return this.encodeInt(t,8,!0)},t.toByte=function(t){return this.decodeInt(t,8,!1)},t.fromByte=function(t){return this.encodeInt(t,8,!1)},t.toShort=function(t){return this.decodeInt(t,16,!0)},t.fromShort=function(t){return this.encodeInt(t,16,!0)},t.toWord=function(t){return this.decodeInt(t,16,!1)},t.fromWord=function(t){return this.encodeInt(t,16,!1)},t.toInt=function(t){return this.decodeInt(t,32,!0)},t.fromInt=function(t){return this.encodeInt(t,32,!0)},t.toLong=function(t){return this.decodeInt(t,64,!0)},t.fromLong=function(t){return this.encodeInt(t,64,!0)},t.toDWord=function(t){return this.decodeInt(t,32,!1)},t.fromDWord=function(t){return this.encodeInt(t,32,!1)},t.toQWord=function(t){return this.decodeInt(t,64,!0)},t.fromQWord=function(t){return this.encodeInt(t,64,!0)};var n=parseInt(16777215*Math.random(),10),s=new RegExp("^[0-9a-fA-F]{24}$"),a=function r(t){if(!(this instanceof r))return new r(t);if(t instanceof r)return t;this._bsontype="ObjectID";var e=r.isValid(t);if(!e&&t)throw new Error("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters");return e&&"string"==typeof t&&24==t.length?r.createFromHexString(t):(t&&"number"!=typeof t?t||12!==t.length||(this.id=t):this.id=this.generate(t),void(r.cacheHexString&&(this.__id=this.toHexString())))},o=[];for(e=0;256>e;e++)o[e]=(15>=e?"0":"")+e.toString(16);return a.prototype.toHexString=function(){if(a.cacheHexString&&this.__id)return this.__id;for(var t="",e=0;e<this.id.length;e++)t+=o[this.id.charCodeAt(e)];return a.cacheHexString&&(this.__id=t),t},a.prototype.get_inc=function(){return a.index=(a.index+1)%16777215},a.prototype.getInc=function(){return this.get_inc()},a.prototype.generate=function(e){"number"!=typeof e&&(e=parseInt(Date.now()/1e3,10));var i=t.encodeInt(e,32,!0,!0),s=t.encodeInt(n,24,!1),a=t.fromShort("undefined"==typeof process?Math.floor(1e5*Math.random()):process.pid%65535),o=t.encodeInt(this.get_inc(),24,!1,!0);return i+s+a+o},a.prototype.toString=function(){return this.toHexString()},a.prototype.inspect=a.prototype.toString,a.prototype.toJSON=function(){return this.toHexString()},a.prototype.equals=function(t){if(!t)return!1;var e=t instanceof a||t.toHexString?t.id:a.createFromHexString(t).id;return this.id===e},a.prototype.getTimestamp=function(){var e=new Date;return e.setTime(1e3*Math.floor(t.decodeInt(this.id.substring(0,4),32,!0,!0))),e},a.index=parseInt(16777215*Math.random(),10),a.createPk=function(){return new a},a.createFromTime=function(e){var i=t.encodeInt(e,32,!0,!0)+t.encodeInt(0,64,!0,!0);return new a(i)},a.createFromHexString=function(e){if("undefined"==typeof e||e&&24!=e.length)throw new Error("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters");var i=e.length;if(i>24)throw new Error("Id cannot be longer than 12 bytes");for(var n,s,o="",r=0;i>r;r+=2)n=e.substr(r,2),s=parseInt(n,16),o+=t.fromByte(s);return new a(o,e)},a.isValid=function(t){return t?t&&"number"!=typeof t&&12!=t.length&&24!=t.length?!1:"string"==typeof t&&24==t.length?s.test(t):!0:!1},Object.defineProperty(a.prototype,"generationTime",{enumerable:!0,get:function(){return Math.floor(t.decodeInt(this.id.substring(0,4),32,!0,!0))},set:function(e){var i=t.encodeInt(e,32,!0,!0);this.id=i+this.id.substr(4),this.toHexString()}}),a}),define("app/managers/UUID",["../helpers/ObjectID"],function(t){var e=null,i="UUID",n=function(){for(var t=i+"=",e=document.cookie.split(";"),n=0;n<e.length;n++){for(var s=e[n];" "==s.charAt(0);)s=s.substring(1,s.length);if(0===s.indexOf(t))return s.substring(t.length,s.length)}return null},s=function(t){var e=new Date;e.setTime(e.getTime()+24*(t?999:0)*60*60*1e3);var n=window.location.hostname,s=n.split(".");s.length>2&&(n="."+s[s.length-2]+"."+s[s.length-1]),document.cookie=i+"="+t+"; Domain="+n+"; Expires="+e.toGMTString()+"; Path=/"},a=function(t){s(t),e=t},o=function(){var e=new t;a(e.toString())};return{init:function(i){e||(e=n(),t.isValid(e)||(e=null),!e&&i&&o())},get:function(){return e}}}),define("app/managers/Tracking",[],function(){var t=null,e=null,i="campaigns",n="companies",s=function(t){for(var e=t+"=",i=document.cookie.split(";"),n=0;n<i.length;n++){for(var s=i[n];" "==s.charAt(0);)s=s.substring(1,s.length);if(0===s.indexOf(e))return s.substring(e.length,s.length)}return null},a=function(t,e){var i=new Date;i.setTime(i.getTime()+24*(e?999:0)*60*60*1e3),document.cookie=t+"="+e+"; Expires="+i.toGMTString()+"; Path=/"},o=function(){if(null===t){t=[];try{var e=s(i);t=e?JSON.parse(e):[]}catch(n){}}return t},r=function(){if(null===e){e=[];try{var t=s(n);e=t?JSON.parse(t):[]}catch(i){}}return e};return{init:function(s){s.on("cfc.campaign_viewed",function(s){-1===o().indexOf(s.campaign_id)&&(t.push(s.campaign_id),a(i,JSON.stringify(t))),-1===r().indexOf(s.company_id)&&(e.push(s.company_id),a(n,JSON.stringify(e)))},this)},newCampaign:function(t){return-1===o().indexOf(t)},newCompany:function(t){return-1===r().indexOf(t)}}}),define("app/helpers/CFC",["./DOM","../helpers/Config","../managers/UUID","../managers/Tracking"],function(t,e,i,n){var s,a=window,o=function(){var s=function(){return a.postMessage&&JSON}(),o=!1,r=function(t){parent.postMessage(JSON.stringify(t),"*")};return{addListeners:function(e){var i=function(t){if("object"==typeof t.data)return t;var i;try{i=JSON.parse(t.data)}catch(n){return t}try{e.dispatch("cfc."+i.fn,[i.data])}catch(n){throw n}};t.addEvent(a,"message",i)},isCapable:function(){return s},getParentData:function(t){return t?o[t]:o},handshake:function(t){if(this.isCapable()){var s=e.get();r({fn:"handshake",data:s,banner_id:s.banner_id,uuid:i.get(),new_campaign:n.newCampaign(s.campaign_id),new_company:n.newCompany(s.company_id)})}else t(!1)},send:function(t,i){r({fn:t,data:i,banner_id:e.get("banner_id")})}}}();return{init:function(t){s=t,o.isCapable()?(o.addListeners(s),o.handshake()):console.warn("Browser can't handle cross-frame communication.")},send:function(){o.send.apply(this,arguments)}}}),define("app/views/ExpandArea",["./View","../helpers/DOM","app/helpers/Config","../helpers/CFC"],function(t,e,i,n){var s=t.extend({tagName:"div",overlay:null,roadblocked:!1,is_overlay:1,hover_time:1,is_hover:!1,animateProgress:function(t,e,i,n){if(this.is_overlay){var s=t.lastElementChild.lastChild.firstChild;if(clearInterval(this.animate),0===e)return r=0,void(s.style.width=r+"%");var a=100,o=1e3/a*this.hover_time,r=0;if(1===e)var c=function(){r+=1,s.style.width=r+"%",r==a&&(i.dispatch("hitarea.action",[{source:"hover",hitArea:n}]),clearInterval(this.animate))};this.animate=setInterval(function(){c()},o)}},config:function(t){var i,n,s=t.get("action"),a=t.get("size"),o=e.getScreenDim(),r={"class":"expand-overlay black",style:"width: "+o.width+"px; height: "+o.height+"px; position: absolute; z-index: 900; text-align: center;"},c=document.body.firstChild;this.el&&c.removeChild(this.el);var u="";("half_page_pre_rec"===a||"half_page_pre_rec_no_cta"===a||"half_page_static"===a)&&(u="half_pre"),"dual_artwork_half_page_pre_rec"===a&&(u="dual_artwork_half_page_pre_rec"),"leaderboard"===a&&(u="leaderboard"),"leaderboard_static"===a&&(u="leaderboard_static"),("billboard_pre_rec"===a||"billboard_pre_rec_no_cta"===a)&&(u="action-square-expand");var h,l="overlay"===s.target&&"yes"===s.hover;h="url"==s.target?(s.cta_text_url&&s.cta_text_url.length)>0?s.cta_text_url:"CLICK TO WATCH":"yes"===s.hover?(s.cta_text_expand_hover&&s.cta_text_expand_hover.length)>0?s.cta_text_expand_hover:"EXPAND TO WATCH":(s.cta_text_expand_no_hover&&s.cta_text_expand_no_hover.length)>0?s.cta_text_expand_no_hover:"CLICK TO EXPAND";var d="<div class='inner-cta-elements "+a+"'><span class='cta-text'>"+h+"</span><img src='//cdn.amp.live/images/index-pointer.png'></div>";if(l?(this.is_overlay=1,this.el=e.create(this.tagName,r,""),i={"class":"action-square "+u+" activate-on-hover",innerHTML:d},n=e.create(this.tagName,i,""),e.appendChildren(this.el,n)):(this.el=e.create(this.tagName,r,""),this.is_overlay=0,i={"class":"action-square "+u+("overlay"===s.target?" expanding ":" clicking "),innerHTML:d},n=e.create(this.tagName,i,""),e.appendChildren(this.el,n)),l){var p={"class":"meter white",style:"display:inline-block;"},f={style:"width: 0%"},g=e.create("div",p,"");e.appendChildren(n,g);var v=e.create("span",f,"");e.appendChildren(g,v),this.hover_time=s.hover_time}overlay=this.el,this._super(t),e.appendChildren(c,this.el)},tower:function(t){t.on("hitarea.mouseover",function(e){this.animateProgress(overlay,1,t,e),overlay.classList.add("active"),n.send("hidden_mouseover",i.get())},this),t.on("hitarea.mouseout",function(e){this.roadblocked||(this.animateProgress(overlay,0,t,e),overlay.classList.remove("active"))},this),t.on("hitarea.action",function(e){this.roadblocked||(this.animateProgress(overlay,0,t,e),overlay.classList.remove("active"))},this),t.on("roadblock",function(t){overlay.querySelector(".inner-cta-elements").classList.contains("medium_rectangle_pre_rec")||overlay.querySelector(".inner-cta-elements").classList.contains("half_page_pre_rec")?overlay.querySelector(".cta-text").innerHTML="CLICK TO<br />CONTINUE WATCHING":overlay.querySelector(".cta-text").innerHTML="CLICK TO CONTINUE WATCHING",overlay.classList.add("active"),overlay.classList.add("roadblock"),this.roadblocked=!0,window.AmpliveRoadBlocked=!0},this)}});return new s("expand-overlay")}),define("app/helpers/Env",["./CFC"],function(t){var e,i={buster:{isTrapped:!1,isAvailable:!0}};return{init:function(n){e=n,e.on("cfc.env",function(t){i=t,e.dispatch("env.update",[t])}),t.send("env")},getData:function(){return i}}}),define("app/controller/MainController",["../helpers/CFC","../helpers/Config","../views/HitArea","../helpers/Env"],function(t,e,i,n){var s=0,a=3e3,o={},r=!1,c=function(){var t=e.get("action"),i="overlay"===t.target,n="//"+e.get("api_domain")+"/"+e.get("campaign_id")+"/frame";if(o.config&&o.config.action&&o.config.action.macro_url_tracking&&o.banner&&o.banner.click_macro&&""!==o.banner.click_macro){var s="",a=t.url;try{s=decodeURIComponent(o.banner.click_macro)}catch(c){console.log(c)}if(""!==s)try{a=encodeURIComponent(t.url)}catch(c){console.log(c)}"appnexus"==o.config.action.macro_url_tracking?(t.url=s+a,i||(r=!0)):t.url=s+a}var u={action:i?"expand":"open",url:i?n:t.url};return u};return{init:function(e,i,r){i.tower(e),e.on("config.loaded",function(t){i.config(t),i.data({}),this._config=t},this),e.on("hitarea.action",function(i){var o=c(),r=n.getData().buster,u=i.hitArea&&"A"===i.hitArea.tagName,h=!u&&(!s||new Date-s>a),l=i&&i.source&&"hover"===i.source,d=!r.isTrapped||r.isTrapped&&r.isAvailable,p=function(){t.send("action",o),s=+new Date},f=function(t,e){try{var i=window.open(o.url,"_blank","screenX=10");i&&"undefined"!=typeof i||t(i),setTimeout(function(){10!==i.screenX?(i.close(),t()):e()},25)}catch(n){return!1}};h&&(l?d?i.hitArea.el.click():f(function(){e.dispatch("action.blocked",[])},p):p())},this),e.on("cfc.banner_vars_after_load",function(t){o=t},this)},getActionMessage:function(){return c()},clickIsPrevented:function(){return r}}}),define("app/views/HitArea",["./View","../helpers/DOM","../controller/MainController","../helpers/CFC"],function(t,e,i,n){var s=t.extend({requiresUpdate:!0,towerDispatchFn:function(t,e){var s=this._tower,a=this;return e&&"action"==t&&i.clickIsPrevented()&&(e.preventDefault(),n.send("open_url",i.getActionMessage().url)),s.dispatch("hitarea."+t,[a])},tagName:"div",expand:!0,updateDom:function(){var t=this;if(this.requiresUpdate){var n=e.getScreenDim(),s=e.getScreenDim();-1===this._config.get("size").indexOf("no_cta")&&(n.height=s.height-22),"billboard_pre_rec"===this._config.get("size")&&(n.height=s.height-10),"vpaid"===this._config.get("size")&&(n.height=s.height);var a={"class":"hit-area",style:"width: "+n.width+"px; height: "+n.height+"px;"},o=document.body.firstChild,r={click:function(e){t.towerDispatchFn("action",e)},mouseover:function(e){t.towerDispatchFn("mouseover",e)},mouseout:function(e){t.towerDispatchFn("mouseout",e)}};this.el&&o.removeChild(this.el),"a"===this.tagName&&(a.target="_blank",a.href=i.getActionMessage().url),"medium_rectangle_pre_rec"===this._config.get("size")&&"rush"===this._config.get("campaign_id")&&(a.style+="margin-top: 169px"),this.el=e.create(this.tagName,a,r),e.appendChildren(o,this.el),"billboard_pre_rec"===this._config.get("size")&&e.appendChildren(o,e.create(this.tagName,{target:"_blank",href:i.getActionMessage().url,"class":"hit-area",style:"width: 578px;height: 250px;position: absolute;right: 0px;"},r)),e.addEvent(window,"mouseout",function(e){t.towerDispatchFn.call(t,"mouseout",e)}),this.requiresUpdate=!1}},config:function(t){this._super.apply(this,arguments),this.expand="overlay"===t.get("action.target"),this.updateDom()},tower:function(t){this._super.apply(this,arguments),t.on("env.update",function(t){if(t&&t.buster){var e=t.buster,i=this.expand,n=!!t.buster,s=!i,a=i&&n&&e.isTrapped&&!e.isAvailable;(!n||s||a)&&(this.tagName="a",this.requiresUpdate=!0,this.updateDom())}},this)}});return new s("hit-area")}),define("app/views/HiddenAnimation",["./View","../helpers/DOM","../helpers/CFC","app/helpers/Config"],function(t,e,i,n){var s=function(t,e,i){var n=55,s=i.screenY+n+t,a=i.screenY+i.outerHeight+e;return s<i.mozInnerScreenY&&i.mozInnerScreenY<a},a=!1;-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome")&&(a=!0);var o=function(){var t=window.chrome,e=window.navigator,i=e.vendor,n=e.userAgent.indexOf("OPR")>-1,s=e.userAgent.indexOf("Edge")>-1,o=e.userAgent.match("CriOS");return o?!0:null!==t&&void 0!==t&&"Google Inc."===i&&n===!1&&s===!1?!0:a?!0:!1}(),r=t.extend({tagName:"iframe",frame:0,animationFn:function(t){for(var e=0,i=["ms","moz","webkit","o"],n=0;n<i.length&&!t.requestAnimationFrame;++n)t.requestAnimationFrame=t[i[n]+"RequestAnimationFrame"];t.requestAnimationFrame||(t.requestAnimationFrame=function(i){var n=(new Date).getTime(),s=Math.max(0,16-(n-e)),a=t.setTimeout(function(){i(n+s)},s);return e=n+s,a})},config:function(t){function r(t,e,n){var a=new Date;c.frame++,a-g>1e3&&(g=a,c.frame=0,window.AmpliveRoadBlocked||(-1!=navigator.userAgent.toLowerCase().indexOf("firefox")?s(0,0,n)&&(v++,i.send("hidden_count",h)):(v++,i.send("hidden_count",h)))),5!=v||m||(m=!0,i.send("hidden_view",h)),e.requestAnimationFrame(function(){r(t,e,n)})}var c=this,u=(e.getScreenDim(),t.get("size")),h=n.get(),l={"class":"hidden-animation "+u+" enable",style:"position: absolute; z-index: 800;"};o&&(l.src="https://static.amp.live/b.html");var d={animationstart:function(t){},animationiteration:function(t){},animationend:function(t){}},p=document.body.firstChild;this.el&&p.removeChild(this.el),this.el=e.create(this.tagName,l,d),this._super(t);var f=this.el;f.style.position="absolute";var g=new Date,v=0,m=!1;a&&document.addEventListener("visibilitychange",function(){document.hidden||(g=new Date)},!1),e.appendChildren(p,this.el);var y=f.contentWindow||f;-1!=navigator.userAgent.toLowerCase().indexOf("firefox")?(c.animationFn(y),window.requestAnimationFrame(function(){r(new Date,window,y)})):o?window.addEventListener("message",function(t){var e=new Date;if("hidden_count_iframe"===t.data.event_id){if(700>e-g)return;window.AmpliveRoadBlocked||(v++,i.send("hidden_count",h)),5===v&&i.send("hidden_view",h)}}):(c.animationFn(y),y.requestAnimationFrame(function(){r(new Date,y)},c.el))}});return new r("hidden-animation")}),define("app/views/states/assets/Button",["../../View","app/helpers/DOM"],function(t,e){return t.extend({_hover:!1,isActive:!1,init:function(t,e){this._super("state-button-"+t,e),this.name=t,this.parent=this.el.parentNode,this.mask=this.parent.children[1],this.lk={expand:[this.el.childNodes[0],this.mask.children[0].childNodes[0]]}},tower:function(t){t.on("action.blocked",function(){if(this.isActive){var t=this.lk.expand[0],e=this.lk.expand[1],i=t.nodeValue,n="CLICK TO EXPAND";t.nodeValue=n,e.nodeValue=n,setTimeout(function(){t.nodeValue=i,e.nodeValue=i},2e3)}},this),t.on("state.activated",function(t){this.isActive=t===this.name},this),t.on("state.deactivated",function(){this.isActive=name!==this.name},this),t.on("hitarea.mouseout",function(){this.isActive&&("acl"==this._config.get("campaign_id")&&(this.el.parentNode.parentNode.style.background="#f7415f"),this.el.parentNode.classList.remove("hover-active"))},this),t.on("hitarea.mouseover",function(t){this._hover="overlay"==this._config.get("action").target&&"yes"===this._config.get("action").hover?this._hover:!1,this.isActive&&("acl"==this._config.get("campaign_id")?this.el.parentNode.parentNode.style.background="#41b9f7":this.el.parentNode.classList.add("hover-active"))},this),this._super(t)},config:function(t){var i=t.get("action"),n=(t.get("campaign_id"),!1),s=t.get("size"),a=("overlay"===i.target&&"yes"===i.hover,"yes"===i.hover),o=i.hover_time;e.create("div",{"class":"click-icon"},"");if(t.hasChanged("action.target")||t.hasChanged("action.hover")||t.hasChanged("action.cta_text_url")||t.hasChanged("action.cta_text_expand_hover")||t.hasChanged("action.cta_text_expand_no_hover")){if("url"===i.target){var r="https://amp.live";/medium_rectangle/.test(s)&&(r="https://amp.live/?utm_source=AmpLive300x250&utm_medium=boost&utm_campaign=pwrdby"),/half_page/.test(s)&&(r="https://amp.live/?utm_source=AmpLive300x600&utm_medium=boost&utm_campaign=pwrdby"),/billboard/.test(s)&&(r="https://amp.live/?utm_source=AmpLive970x250&utm_medium=boost&utm_campaign=pwrdby"),this.el.innerHTML="",this.el.href=r,this.el.target="_blank",this.el.innerHTML='Powered by <img src="https://cdn.amp.live/rsz_1rsz_cropped-whte.png">'}"overlay"===i.target&&("yes"!==i.hover?(this.el.innerHTML="",this.el.innerHTML=t.get("action.cta_text_expand_no_hover")):(this.el.innerHTML="",this.el.innerHTML=t.get("action.cta_text_expand_hover"))),this.forceLanguageUpdate=!0}this._super(t),this._hover=a,a&&t.hasChanged("action.hover_time")&&(n=!0),t.hasChanged("action.hover")&&(clearTimeout(this.timeout),a?this.el.classList.remove("active"):o=0,n=!0),n&&(this.mask.style["-webkit-transition-duration"]=o+"s")}})}),define("app/views/states/assets/thumbBox/Source",["app/helpers/DOM","app/helpers/Config","app/helpers/CFC"],function(t,e,i){var n,s;return Class.extend({adapter:null,init:function(t,e){this.type=t,this.parent=e,this.overlay=e.nextElementSibling},listenToEvent:function(t,e){var i=t.addEventListener?"addEventListener":"attachEvent",n=t[i],s="attachEvent"==i?"onmessage":"message";n(s,e,!1)},activate:function(){console.log("activated:",this.type)},deactivate:function(){console.log("deactivate:",this.type)},config:function(t){this._config=t,n=t.get("layout"),s=t.get("size")},getSize:function(t){var e={leaderboard:[160,170],vpaid:[350,196],medium_rectangle_pre_rec:[300,252],half_page_pre_rec:[300,252],billboard_pre_rec:[392,220],dual_artwork_half_page_pre_rec:[300,252],half_page_pre_rec_no_cta:[300,252],medium_rectangle_pre_rec_no_cta:[300,252],billboard_pre_rec_no_cta:[444,250]},i={leaderboard:[160,90],vpaid:[300,169],medium_rectangle_pre_rec:[300,170],half_page_pre_rec:[300,170],billboard_pre_rec:[392,250],dual_artwork_half_page_pre_rec:[300,252],billboard_pre_rec_no_cta:[444,250],half_page_pre_rec_no_cta:[300,170],medium_rectangle_pre_rec_no_cta:[300,170]};return"userInitiated"==t?i[s]:e[s]},tower:function(t){this._tower=t},toggleMute:function(){console.log("toggle mute")},addControls:function(n){if(!n.parentNode)return!1;var s=this;this.removeControls(),this.controls=t.create("div",{"class":"controls"}),n.parentNode.appendChild(this.controls);var a=t.create("a",{"class":this.isMuted?"mute-btn muted":"mute-btn"},{click:function(){var n=s.toggleMute();if(!n){var o=e.get();i.send("unmute",o)}return t.setAttributes(a,{"class":n?"mute-btn muted":"mute-btn"}),!1}});this.controlsA=a,this.controls.appendChild(a)},removeControls:function(){this.controls&&this.controls.parentNode&&this.controls.parentNode.removeChild(this.controls)},onPlayBackStart:function(t){this.toggleOverlay(!1);var e=this;this.playbackTimeout=setTimeout(function(){e.countView(t)},1e4)},onPlayBackStop:function(t){clearTimeout(this.playbackTimeout),console.log("on playback stop")},countView:function(t){i.send("videoImpression",{videoId:t})},toggleOverlay:function(t){this.overlay.classList[t?"add":"remove"]("show")}})}),define("app/views/states/assets/thumbBox/sources/Upload",["../Source","app/helpers/DOM","app/helpers/Config","app/helpers/CFC"],function(t,e,i,n){return t.extend({content:null,src:null,loopCount:0,paths:[],isMuted:!0,is_playing:!1,activated:!1,activate:function(){if(!this.activated&&(this.activated=!0,this.content&&(e.removeEvent(this.content,"ended",this.onEnded),this.parent.removeChild(this.content)),this.paths&&this.paths.length)){var t=this,n=this.getSize(this.isUserInitiated?"userInitiated":""),s=this.configData.size?this.configData.size:i.get("size"),a={ended:function(){t.onEnded.apply(t,arguments)}},o={width:n[0],height:n[1]+(this.isUserInitiated?0:-82)};if("billboard_pre_rec"==s&&(o={width:n[0],height:n[1]
}),"billboard_pre_rec_no_cta"==s&&(o={width:n[0],height:n[1]}),0===this.configData.loops&&(o.loop="loop"),(this.isUserInitiated?"userInitiated":"")&&(o.controls=!0),this.loopCount=0,this.supportsHTML5Video())this.content=e.create("video",o,a),this.isUserInitiated||(this.content.volume=0,this.content.muted=!1),"load"===this.configData.play_video_on&&this.play(),this.setVideoPaths(),this.parent.innerHTML="",this.parent.appendChild(this.content),t.soundOnHover||t.isUserInitiated?this.removeControls():this.addControls(this.content);else{var r=this.getFlashFallbackObject(o);this.parent.innerHTML="",this.parent.appendChild(r)}this.configData.roadblock&&(this.roadblockTimeout=setTimeout(function(){t.pause(),t._tower.dispatch("roadblock",[t]),t.removeControls()},1e3*this.configData.roadblock))}},supportsHTML5Video:function(){return!!document.createElement("video").canPlayType},toggleMute:function(){if(this.content){if(this.content.volume=!this.content.volume,this.content.muted){var t=i.get();n.send("unmute",t)}return this.content.muted=!this.content.volume,this.content.muted}return null},deactivate:function(){try{this.content&&this.parent.hasChildNodes(this.content)&&this.parent.removeChild(this.content)}catch(t){console.log(t)}delete this.content,this.content=null},config:function(t){this._super.apply(this,arguments);var e,n="video.upload",s=t.get(n),a=function(e){return t.hasChanged(n+"."+e)},o=this.content;this.layout=t.get("layout"),this.configData=s,"undefined"!=typeof this.configData.user_initiated_video&&"yes"==this.configData.user_initiated_video?(this.configData.loops=0,this.configData.roadblock=null,this.soundOnHover=!1,this.isUserInitiated=!0,this.configData.play_video_on="never",this.configData.play_sound_on="never"):(this.configData.loops=parseInt(this.configData.loops,10),this.configData.roadblock="yes"==this.configData.roadblock?parseInt(this.configData.roadblock_time,10):null,this.soundOnHover="hover"===s.play_sound_on,this.isUserInitiated=!1,this.configData.play_video_on=s.play_video_on,this.configData.play_sound_on=s.play_sound_on),e="prerec"===this.layout,a("video.thumb")&&(this.poster=i.get("video.thumb")),a("key")&&(this.paths=s.key,"upload"===i.get("video.source")&&(this.activated=!1,this.activate())),a("loops")&&(this.loopCount=0),o&&(a("key")&&this.setVideoPaths(),a("play_video_on")&&("load"===s.play_video_on?this.play():this.pause()),e&&a("play_sound_on")&&(this.soundOnHover?(o.volume=0,o.muted=!1,this.removeControls()):this.addControls(o)))},sources:[],setVideoPaths:function(){if(this.content){var t=this.content,n=[],s=this,a=[t];this.sources.forEach(function(e){t&&t.hasChildNodes(e)&&t.removeChild(e)}),null!==this.paths&&"null"!=this.paths&&this.paths.forEach(function(t){var o=e.create("source",{src:i.getCFPath()+t,type:s.getVideoType(t)});n.push(o),a.push(o)}),n.length&&e.appendChildren.apply(e,a),this.sources=n}},getFlashFallbackObject:function(t){var n=escape("http:"+this.findByFileType("mp4")),s=escape("http:"+i.getCFPath()+this.poster);t.type="application/x-shockwave-flash",t.data="http:"+i.getCFPath()+"embed/libs/fme/fme.swf";var a=e.create("object",t);return e.appendChildren(a,e.create("param",{name:"movie",value:t.data}),e.create("param",{name:"wmode",value:"transparent"}),e.create("param",{name:"flashvars",value:"&file="+n+"&autoplay=true&poster="+s})),a},getVideoType:function(t){var e=t.split(".").splice(-1);return"video/"+e},findByFileType:function(t){for(var e,n=0;n<this.paths.length;n++)if(e=this.paths[n],e.split(".")[1]===t)return i.getCFPath()+e;return!1},tower:function(t){this._super.apply(this,arguments),t.on("hitarea.mouseover",this.onMouseOver,this),t.on("hitarea.mouseout",this.onMouseOut,this),t.on("hitarea.action",this.onMouseOut,this)},onEnded:function(){this.loopCount++;var t=this.configData.loops,e=this.loopCount,i=0===t||t>e,n=0!==t&&t>e;this.content&&(i?(this.toggleOverlay(!1),this.play()):(this.toggleOverlay(!0),n&&(this.loopCount=0)))},onMouseOver:function(){this.content&&(this.content.muted=!1,"hover"===this.configData.play_video_on&&(this.play(),this.toggleOverlay(!1)),"hover"===this.configData.play_sound_on&&(this.startSoundAfterDelay(),this.content.currentTime=0))},onMouseOut:function(){this.content&&("hover"===this.configData.play_video_on&&this.pause(),"hover"===this.configData.play_sound_on&&this.stopSound())},startSoundAfterDelay:function(t){var e=this;t=1e3*(t||1),this.soundTimeout=setTimeout(function(){e.content.volume=1},t)},stopSound:function(){clearTimeout(this.soundTimeout),this.content.muted=!1,this.content.volume=0},play:function(){this.content&&this.content.play&&(this.is_playing||(this.is_playing=!0,this.content.paused&&this.content.play()))},pause:function(){this.content&&this.content.pause&&(this.is_playing=!1,this.content.pause())}})}),define("app/views/states/assets/thumbBox/sources/IFrame",["../Source","app/helpers/DOM"],function(t,e){return t.extend({key:null,key_unmuted:null,content:null,isMuted:!0,configKey:"video.iframe.key",verticalOffset:0,roadblock:null,roadblocked:!1,marginTop:0,activate:function(t){this.key=t.key,this.key_unmuted=t.key_unmuted,this.content=this.getContent(t),this.parent.appendChild(this.content),this.addControls(this.content)},deactivate:function(){this.content&&(this.parent.removeChild(this.content),delete this.content,this.removeControls())},config:function(t){this._super.apply(this,arguments),t.hasChanged(this.configKey)&&(this.key=t.get(this.configKey),this.updateContent());var e=t.get("video.iframe");"undefined"!=typeof e.user_initiated_video&&"yes"==e.user_initiated_video?(this.roadblock=null,this.isUserInitiated=!0):(this.roadblock="yes"==e.roadblock?parseInt(e.roadblock_time,10):null,this.isUserInitiated=!1)},getContent:function(t){var i=this.getSize(this.isUserInitiated?"userInitiated":""),n=this.getAttributes({width:i[0],height:i[1],src:this.getSource(t.key,i),scrolling:"no",frameborder:0,style:"border: 0 none transparent; margin-top:-"+("billboard_pre_rec"==t.size||"billboard_pre_rec_no_cta"==t.size||"half_page_pre_rec"==t.size||"half_page_pre_rec_no_cta"==t.size||"dual_artwork_half_page_pre_rec"==t.size?0:this.marginTop)+"px;","data-size":t.size});this.size=i;var s=e.create("iframe",n),a=this;return this.roadblock&&setTimeout(function(){s.src="",a._tower.dispatch("roadblock",[a]),a.removeControls()},1e3*this.roadblock),s},getAttributes:function(t){return t},getSource:function(t,e){return t},getVerticalOffset:function(t){return this.verticalOffset},getSize:function(){var t=this._super.apply(this,arguments);return 300==t[0]&&252==t[1]&&(t=[300,170]),392==t[0]&&250==t[1]&&(t[1]=220),t},updateContent:function(){this.content&&(this.content.src=this.getSource(this.key,this.getSize()))},toggleMute:function(){return this.content&&this.key_unmuted?(this.isMuted?this.content.src=this.key_unmuted:this.content.src=this.key,this.isMuted=!this.isMuted,this.isMuted):void 0}})}),define("app/views/states/assets/thumbBox/sources/UStream",["./IFrame","app/helpers/CFC","app/helpers/Config"],function(t,e,i){return t.extend({configKey:"video.ustream.key",verticalOffset:100,isMuted:!0,activate:function(t){this.content=this.getContent(t),this.content.muted=!0,this.parent.appendChild(this.content),this.isUserInitiated||this.addControls(this.content),this.content.wasUnmuted=!1},getAttributes:function(t){switch(t["data-size"]){case"billboard_pre_rec":t.style="border: 0 none transparent;",t.height=220;break;case"billboard_pre_rec_no_cta":t.style="border: 0 none transparent;",t.height=250;break;case"medium_rectangle_pre_rec":t.style="border: 0 none transparent; margin-top:0px;";break;case"medium_rectangle_pre_rec_no_cta":t.style="border: 0 none transparent; margin-top:0px;";break;case"half_page_pre_rec":t.style="border: 0 none transparent;";break;case"half_page_pre_rec_no_cta":t.style="border: 0 none transparent;";break;case"leaderboard":t.style="border: 0 none transparent; margin-top:"+(this.isUserInitiated?0:"-41")+"px;"}return t},getSource:function(t,e){var i=null!==this.content&&"undefined"!=typeof this.content.muted?this.content.muted:!0;this.isUserInitiated&&(i=!this.isUserInitiated);var n=!this.isUserInitiated,s="html5ui&autoplay="+n+"&volume="+(i?"0":"99")+"&v=3&wmode=direct";return"https://www.ustream.tv/embed/"+t+"?"+s},config:function(t){this._super.apply(this,arguments);var e=t.get("video.ustream");"undefined"!=typeof e.user_initiated_video&&"yes"==e.user_initiated_video?(this.roadblock=null,this.isUserInitiated=!0,this.verticalOffset=0):(this.roadblock="yes"==e.roadblock?parseInt(e.roadblock_time,10):null,this.isUserInitiated=!1)},toggleMute:function(){if(this.content){if(this.content.muted){var t=i.get();e.send("unmute",t)}return this.content.volume=!this.content.volume,this.content.muted=!this.content.volume,this.updateContent(),this.content.muted||this.content.wasUnmuted||(this.content.wasUnmuted=!0),this.content.muted}return null}})}),define("app/views/states/assets/thumbBox/sources/Livestream",["./IFrame"],function(t){return t.extend({configKey:"video.livestream.key",verticalOffset:50,getSource:function(t,e){var i="mute=true&layout=4&autoPlay=true&width="+e[0]+"&height="+e[1];return"http://cdn.livestream.com/embed/"+t+"?"+i}})}),define("app/views/states/assets/thumbBox/sources/Livestreamnew",["./IFrame","app/helpers/CFC","app/helpers/Config"],function(t,e,i){return t.extend({configKey:"video.livestreamnew",verticalOffset:0,isMuted:!0,marginTop:0,activate:function(t){this.key=t.key,this.content=this.getContent(t),this.content.muted=!0,this.parent.appendChild(this.content),this.isUserInitiated||this.addControls(this.content),this.content.wasUnmuted=!1},getSource:function(t,e){var i=null!==this.content&&"undefined"!=typeof this.content.muted?this.content.muted:!0;this.isUserInitiated&&this.content&&!this.content.wasUnmuted&&(i=!0);var n=!this.isUserInitiated,s="enableInfoAndActivity=false&mute="+i+"&autoPlay="+n+"&width="+e[0]+"&height="+e[1];return"https://livestream.com/accounts/"+t.key+"/events/"+t.event+"/player?"+s},config:function(t){this._super.apply(this,arguments);var e=t.get("video.livestreamnew.key");"undefined"!=typeof e.user_initiated_video&&"yes"==e.user_initiated_video?(this.roadblock=null,this.isUserInitiated=!0,this.verticalOffset=0):(this.roadblock="yes"==e.roadblock?parseInt(e.roadblock_time,10):null,this.isUserInitiated=!1)},toggleMute:function(){if(this.content){if(this.content.muted){var t=i.get();e.send("unmute",t)}return this.content.volume=!this.content.volume,this.content.muted=!this.content.muted,this.updateContent(),this.content.muted||this.content.wasUnmuted||(this.content.wasUnmuted=!0),this.content.muted}return null}})}),define("app/views/states/assets/thumbBox/sources/NowLive",["../Source","app/helpers/DOM"],function(t){return t.extend({id:null,template:'<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="142" height="80" id="player"><param name="movie" value="http://static.nowlive.com/com/swf/player.swf?t=ev&i=:id&a=1&n=Embed&j=0" /><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="true" /><embed name="player" width="142" height="80" allowfullscreen="true" allowscriptaccess="always" src="http://static.nowlive.com/com/swf/player.swf?t=ev&i=:id&a=1&n=Embed&j=0" type="application/x-shockwave-flash"></embed></object>',activate:function(t){this.id=t.id,this.parent.innerHTML=this.getHTML()},deactivate:function(){this.innerHTML=""},config:function(t){this._super.apply(this,arguments);var e="video.nowlive",i=e+".id";t.hasChanged(i)&&(this.id=t.get(i),this.activate(t.get(e)))},getHTML:function(){var t=this.id,e=this.template;return t?e.split(":id").join(t):""}})}),define("app/views/states/assets/thumbBox/sources/Youtube",["../Source","app/helpers/DOM","app/helpers/CFC","app/helpers/Config"],function(t,e,i,n){return t.extend({apiUrl:"//www.youtube.com/iframe_api",onApiReady:null,verticalOffset:-38,isMuted:!0,verticalOffsets:{event:-25,mock:-40},heightOffset:0,wrappingTag:null,roadblockTimeout:null,createVideo:function(t){this.isUserInitiated&&(this.heightOffset=0,this.verticalOffsets[this.layout]=0);var i=this,n=this.getTagId(),s="billboard_pre_rec"==t.size||"billboard_pre_rec_no_cta"==t.size?"0":this.verticalOffsets[this.layout];"dual_artwork_half_page_pre_rec"==t.size&&(i.isUserInitiated||(s=0));var a=e.create("div",{style:"position:relative; z-index:0; margin-top:"+s+"px !important"}),o=e.create("div",{id:n});this.warppingTag=a,a.appendChild(o),this.parent.appendChild(a),this.wrappingTag=a;var r=function(){var e=i.getSize(i.isUserInitiated?"userInitiated":"");"dual_artwork_half_page_pre_rec"==t.size&&(e[1]=169);var s={wmode:"transparent",iv_load_policy:3,rel:0,showinfo:0},o=t.key;if(-1!==o.indexOf("list")){var r=o.split("?list=");o=r[0],s.list=r[1]}this.player=new YT.Player(n,{width:e[0],height:e[1]+this.heightOffset,autoplay:this.isUserInitiated?0:1,controls:0,videoId:o,enablejsapi:1,origin:"http://onintercast.com",playerVars:s,events:{onReady:function(t){i.isUserInitiated||t.target.playVideo(),t.target.mute(),t.target.setPlaybackQuality("small"),i.soundOnHover||i.isUserInitiated?i.removeControls():i.addControls(a)},onStateChange:function(e){if(e.data===YT.PlayerState.ENDED&&(i.onPlayBackStop(t.id),i.onEnded.apply(i,arguments)),e.data===YT.PlayerState.PLAYING&&(i.onPlayBackStart(t.id),i.configData.roadblock)){i.roadblockTimeout&&(clearTimeout(i.roadblockTimeout),i.roadblockTimeout=null);var n=e.target;i.roadblockTimeout=setTimeout(function(){i.roadblockTimeout=null,n.getPlayerState()===YT.PlayerState.PLAYING&&n.pauseVideo(),i._tower.dispatch("roadblock",[i]),i.removeControls()},1e3*i.configData.roadblock)}}}})};window.youTubeApiReady?r.apply(i,arguments):this.onApiReady=function(){r.apply(i,arguments)},window.youTubeApiScriptLoaded||this.loadApi()},loadApi:function(){if(!window.youTubeApiScriptLoaded){var t=this;window.onYouTubeIframeAPIReady=function(){t._tower.dispatch("youtube.api-ready")};var i=e.create("script",{src:this.apiUrl}),n=document.getElementsByTagName("head")[0];e.appendChildren(n,i),window.youTubeApiScriptLoaded=!0}},tower:function(t){this._super.apply(this,arguments),t.on("youtube.api-ready",function(){window.youTubeApiReady=!0,this.onApiReady&&this.onApiReady()},this),t.on("hitarea.mouseover",this.onMouseOver,this),t.on("hitarea.mouseout",this.onMouseOut,this),t.on("hitarea.action",function(){this.player&&this.player.pauseVideo()},this),t.on("action.blocked",function(){this.player&&this.player.playVideo()},this),t.on("cfc.collapse",function(){this.player&&this.player.playVideo()},this)},onMouseOver:function(){this.player&&("hover"===this.configData.play_video_on&&this.player.playVideo(),"hover"===this.configData.play_sound_on&&(console.log("hover sound"),this.startSoundAfterDelay(),this.player.seekTo(0,!0)))},onMouseOut:function(){this.player&&("hover"===this.configData.play_sound_on&&(console.log("hover sound out"),this.stopSound()),"hover"===this.configData.play_video_on&&this.player.pauseVideo())},startSoundAfterDelay:function(t){var e=this;t=1e3*(t||1),this.soundTimeout=setTimeout(function(){e.player.unMute()},t)},stopSound:function(){clearTimeout(this.soundTimeout),this.player.mute()},activate:function(t){this.createVideo(t)},deactivate:function(){this.player&&(this.player.destroy(),this.parent.removeChild(this.wrappingTag),this.player=!1)},config:function(t){this._super.apply(this,arguments);var e,i="video.youtube",n=t.get(i),s=function(e){return t.hasChanged(i+"."+e)},a=this.player;if(this.layout=t.get("layout"),this.configData=n,"undefined"!=typeof this.configData.user_initiated_video&&"yes"==this.configData.user_initiated_video?(this.configData.loops=0,this.configData.roadblock=null,this.soundOnHover=!1,this.isUserInitiated=!0,this.configData.play_video_on="never",this.configData.play_sound_on="never"):(this.configData.loops=parseInt(this.configData.loops,10),this.configData.roadblock="yes"==this.configData.roadblock?parseInt(this.configData.roadblock_time,10):null,this.soundOnHover="hover"===n.play_sound_on,this.isUserInitiated=!1,this.configData.play_video_on=n.play_video_on,this.configData.play_sound_on=n.play_sound_on),e="prerec"===this.layout,s("loops")&&(this.loopCount=0),a){if(s("key")&&a.loadVideoById(n.key),s("play_video_on")&&("load"===this.configData.play_video_on?a.playVideo():a.pauseVideo()),s("loops")&&!this.isUserInitiated&&a.playVideo(),t.hasChanged("layout")){var o=this.getSize(this.isUserInitiated?"userInitiated":"");this.warppingTag.style.marginTop=this.verticalOffsets[this.layout],o&&a.setSize(o[0],o[1]+this.heightOffset)}e&&s("play_sound_on")&&(this.soundOnHover?(a.mute(),this.removeControls()):this.addControls(this.wrappingTag))}},toggleMute:function(){if(this.player){var t=this.player.isMuted(),e=t?"unMute":"mute";if(t){var s=n.get();i.send("unmute",s)}return this.player[e](),!t}return null},onEnded:function(){this.loopCount++;var t=this.configData.loops,e=this.loopCount,i=0===t||t>e,n=0!==t&&t>e;this.player&&(i?(this.toggleOverlay(!1),this.player.playVideo()):(this.toggleOverlay(!0),n&&(this.loopCount=0)))},getTagId:function(){return"video-"+ +new Date}})}),define("app/views/states/assets/thumbBox/sources/Script",["../Source","app/helpers/DOM"],function(t,e){return t.extend({currentScriptId:null,configKey:"video.script.key",activate:function(t){this.key=t.key,this.content=this.getContent(this.key),this.parent.appendChild(this.content)},deactivate:function(){this.content&&(this.parent.removeChild(this.content),delete this.content)},onLoad:function(){console.log("here")},config:function(t){this._super.apply(this,arguments),t.hasChanged(this.configKey)&&(this.key=t.get(this.configKey),this.updateContent())},getContent:function(t){var i=this.getSource(t),n=e.create("script",{src:i}),s=this;return n.onload=function(){s.onLoad()},n},getSource:function(t){return t},updateContent:function(){this.content&&(this.content.parent.removeChild(this.content),this.content=this.getContent(this.key))}})}),define("app/views/states/assets/thumbBox/sources/AolDemand",["./Script","app/helpers/DOM","app/helpers/Config","app/helpers/CFC"],function(t,e,i,n){return t.extend({isMuted:!0,onLoad:function(){var t=this;setTimeout(function(){t.player=document.querySelector("#o2player_1").vdb_Player,t.addControls(document.querySelector("#o2player_1"))},500)},toggleMute:function(){if(document.querySelector("#o2player_1").vdb_Player){var t=0===document.querySelector("#o2player_1").vdb_Player.getPlayerInfo().volume;if(t){var e=i.get();n.send("unmute",e)}return this.player.mute(),!t}return null},base:"//spshared.5min.com/Scripts/PlayerSeed.js?",getSource:function(t){var e=this.getSize(),i=["width="+e[0],"height="+e[1],"playList="+t,"sid=577","autoStart=true","origin=SOLR","relatedMode=0","companionPos=","hasCompanion=false","colorPallet=%230CA4EE","playerActions=0","videoControlDisplayColor=%23191919","shuffle=0","mute=1"].join("&");return this.base+i}})}),define("app/views/states/assets/thumbBox/sources/JWPlayer",["../Source","app/helpers/Config","app/helpers/DOM","app/helpers/CFC"],function(t,e,i,n){return t.extend({key:null,key_unmuted:null,content:null,isMuted:!0,configKey:"video.jwplayer.key",verticalOffset:0,roadblock:null,roadblocked:!1,marginTop:0,dataSize:null,toPost:-1!==document.location.href.indexOf("?preview=true")?window:parent,activate:function(t){var i=t.key;this.dataSize=t.size;var s=this;"string"==typeof i?i=[i]:i[0]=e.getCFPath()+i[0],"youtube"===e.get("video.source")&&(i[0]="//www.youtube.com/v/"+i[0]),t.key=i[0],t.key="https://static.amp.live/player2.html?autoplay="+("vpaid"===t.size?0:1)+"&url="+encodeURIComponent(t.key)+"&muted="+("vpaid"===t.size?0:s.isMuted?1:0)+"&controls="+(this.isUserInitiated?1:0),this.key=t.key,this.key_unmuted="https://static.amp.live/player2.html?autoplay="+("vpaid"===t.size?0:1)+"&url="+encodeURIComponent(i)+"&muted=0&controls="+(this.isUserInitiated?1:0),this.content=this.getContent(t),this.parent.appendChild(this.content),this.listenToEvent(window,function(t){if(t.data&&"string"==typeof t.data&&-1!==t.data.indexOf("amplive-player::")){console.log(t.data,"vpaid<-player");try{var i=t.data.replace("amplive-player::",""),a=i.split(":");if("start"===a[0]){var o=e.get();n.send("vpaid_impression",o)}}catch(r){console.error("There was an error while parsing messages")}s.toPost.postMessage(t.data.replace("amplive-player","amplive"),"*")}},!1),this.listenToEvent(window,function(t){if(t.data&&"string"==typeof t.data&&-1!==t.data.indexOf("amplive-vpaid::")&&"undefined"!=typeof parent){console.log(t.data,"vpaid->player");try{var e=t.data.replace("amplive-vpaid::",""),i=e.split(":");"volume"===i[0]&&(parseInt(i[1],10)>0?s.isMuted&&s.controlsA.click():s.isMuted||s.controlsA.click()),"show-skip"===i[0]&&s.addSkipButton(s.content)}catch(n){console.error("There was an error while parsing messages")}s.content.contentWindow.postMessage(t.data.replace("amplive-vpaid","amplive"),"*")}}),this.addControls(this.content)},addSkipButton:function(t){var s=e.get();if(n.send("player_showskip",s),!t.parentNode)return!1;this.removeSkipButton(),this.skipButton=i.create("div",{"class":"skip-container"}),t.parentNode.appendChild(this.skipButton);var a=i.create("button",{"class":"skip-button"},{click:function(){parent.postMessage("amplive::do-skip","*")}}),o=i.create("div",{"class":"text"});o.innerText="Skip Ad",a.appendChild(o),this.skipButton.appendChild(a)},removeSkipButton:function(t){this.skipButton&&this.skipButton.parentNode&&this.skipButton.parentNode.removeChild(this.skipButton)},deactivate:function(){this.content&&(this.parent.removeChild(this.content),delete this.content,this.removeControls())},config:function(t){this._super.apply(this,arguments);var i="video.jwplayer";"upload"===e.get("video.source")&&(this.configKey="video.upload.key",i="video.upload"),t.hasChanged(this.configKey)&&(this.key=t.get(this.configKey),this.updateContent());var n=t.get(i);"undefined"!=typeof n.user_initiated_video&&"yes"==n.user_initiated_video?(this.roadblock=null,this.isUserInitiated=!0):(this.roadblock="yes"==n.roadblock?parseInt(n.roadblock_time,10):null,this.isUserInitiated=!1)},getContent:function(t){var e=this.getSize(this.isUserInitiated?"userInitiated":""),n=this.getAttributes({width:e[0],height:e[1],src:this.getSource(t.key,e),scrolling:"no",frameborder:0,style:"border: 0 none transparent; margin-top:-"+("billboard_pre_rec"==t.size||"billboard_pre_rec_no_cta"==t.size||"half_page_pre_rec"==t.size||"half_page_pre_rec_no_cta"==t.size||"dual_artwork_half_page_pre_rec"==t.size?0:this.marginTop)+"px;","data-size":t.size});this.size=e;var s=i.create("iframe",n),a=this;return this.roadblock&&setTimeout(function(){s.src="",a._tower.dispatch("roadblock",[a]),a.removeControls()},1e3*this.roadblock),s},getAttributes:function(t){return t},getSource:function(t,e){return t},getVerticalOffset:function(t){return this.verticalOffset},getSize:function(){var t=this._super.apply(this,arguments);return 300==t[0]&&252==t[1]&&(t=[300,170]),392==t[0]&&250==t[1]&&(t[1]=220),t},updateContent:function(){this.content&&(this.key="https://static.amp.live/player.html?url="+encodeURIComponent(this.key)+"&muted=1&controls="+this.isUserInitiated,this.content.src=this.getSource(this.key,this.getSize()))},toggleMute:function(){return"vpaid"===this.dataSize?this.isMuted?this.toPost.postMessage("amplive::do-volume:1","*"):this.toPost.postMessage("amplive::do-volume:0","*"):this.content&&this.key_unmuted&&(this.isMuted?this.content.src=this.key_unmuted:this.content.src=this.key),this.isMuted=!this.isMuted,this.isMuted}})}),define("app/views/states/assets/thumbBox/sources/CustomEmbed",["../Source","app/helpers/DOM"],function(t,e){return t.extend({key:null,key_unmuted:null,content:null,isMuted:!0,configKey:"video.customembed.key",verticalOffset:0,roadblock:null,roadblocked:!1,marginTop:0,activate:function(t){this.key=t.key,this.key_unmuted=t.key_unmuted,this.content=this.getContent(t),this.parent.appendChild(this.content),this.addControls(this.content)},deactivate:function(){this.content&&(this.parent.removeChild(this.content),delete this.content,this.removeControls())},config:function(t){this._super.apply(this,arguments),t.hasChanged(this.configKey)&&(this.key=t.get(this.configKey),this.updateContent());var e=t.get("video.iframe");"undefined"!=typeof e.user_initiated_video&&"yes"==e.user_initiated_video?(this.roadblock=null,this.isUserInitiated=!0):(this.roadblock="yes"==e.roadblock?parseInt(e.roadblock_time,10):null,this.isUserInitiated=!1)},generateDataUrl:function(t){return t="<html><head><style>body{margin:0px;padding:0px;}</style></head><body>"+t+"</body></html>","data:text/html;charset=utf-8,"+encodeURI(t)},getContent:function(t){var i=this.getSize(this.isUserInitiated?"userInitiated":"");"leaderboard"==t.size&&(i[1]=90);var n=this.getAttributes({width:i[0],height:i[1],src:this.generateDataUrl(this.getSource(t.key,i)),scrolling:"no",frameborder:0,style:"border: 0 none transparent; margin-top:-"+("billboard_pre_rec"==t.size||"billboard_pre_rec_no_cta"==t.size||"half_page_pre_rec"==t.size||"half_page_pre_rec_no_cta"==t.size||"dual_artwork_half_page_pre_rec"==t.size?0:this.marginTop)+"px;","data-size":t.size});this.size=i;var s=e.create("iframe",n),a=this;return this.roadblock&&setTimeout(function(){s.src="",a._tower.dispatch("roadblock",[a]),a.removeControls()},1e3*this.roadblock),s},getAttributes:function(t){return t},getSource:function(t,e){return t},getVerticalOffset:function(t){return this.verticalOffset},getSize:function(){var t=this._super.apply(this,arguments);return 300==t[0]&&252==t[1]&&(t=[300,170]),392==t[0]&&250==t[1]&&(t[1]=220),t},updateContent:function(){this.content&&(this.content.src=this.generateDataUrl(this.getSource(this.key,this.getSize())))},toggleMute:function(){return this.content&&this.key_unmuted?(this.isMuted?this.content.src=this.generateDataUrl(this.key_unmuted):this.content.src=this.generateDataUrl(this.key),this.isMuted=!this.isMuted,this.isMuted):void 0}})}),define("app/views/states/assets/thumbBox/sources/Stream",["./Script","app/helpers/DOM","app/helpers/CFC","app/helpers/Config"],function(t,e,i,n){return t.extend({targetId:"streamapi",marginTop:0,src:"https://cdn.embed.ly/player-0.0.12.min.js",key:null,key_unmuted:null,content:null,isMuted:!0,ready:!1,verticalOffset:0,toPost:-1!==document.location.href.indexOf("?preview=true")?window:parent,roadblock:null,roadblocked:!1,isLoadedTest:function(){return!!window.playerjs},getAttributes:function(t){return t},activate:function(t){"vpaid"===t.size&&(this.isMuted=!1),this.key=t.key,this.content=this.getContent(t),this.parent.appendChild(this.content),this.addControls(this.content)},loadVideo:function(t){var i=this.getSize(this.isUserInitiated?"userInitiated":""),n=this.getAttributes({width:i[0],height:i[1],src:t.key,id:"stream-iframe",scrolling:"no",frameborder:0,style:"border: 0 none transparent; margin-top:-"+("billboard_pre_rec"==t.size||"billboard_pre_rec_no_cta"==t.size||"half_page_pre_rec"==t.size||"half_page_pre_rec_no_cta"==t.size||"dual_artwork_half_page_pre_rec"==t.size?0:this.marginTop)+"px;","data-size":t.size});this.size=i;var s=e.create("iframe",n);document.getElementById("streamapi").appendChild(s);var a=new playerjs.Player(s);this.player=a;var o=this;a.on("ready",function(){o.ready=!0,o.toPost.postMessage("amplive::ready","*"),a.on("ended",function(){o.toPost.postMessage("amplive::complete","*")}),a.on("timeupdate",function(t){o.toPost.postMessage("amplive::time:"+t.duration+":"+t.seconds,"*")}),a.on("play",function(){console.log("play")}),a.getDuration(function(t){console.log(t)}),a.supports("method","mute")&&(this.isMuted?a.mute():a.unmute()),"vpaid"===t.size?a.pause():a.play()}),this.listenToEvent(window,function(t){if(t.data&&"string"==typeof t.data&&-1!==t.data.indexOf("amplive-vpaid::")&&"undefined"!=typeof parent){console.log(t.data,"vpaid->player");try{var e=t.data.replace("amplive-vpaid::",""),i=e.split(":");switch("volume"===i[0]&&(parseInt(i[1],10)>0?o.isMuted&&o.controlsA.click():o.isMuted||o.controlsA.click()),"show-skip"===i[0]&&o.addSkipButton(o.content),i[0]){case"pause":a.pause();break;case"play":o.playing||(o.toPost.postMessage("amplive::start","*"),o.playing=!0),a.play();break;case"volume":a.setVolume(i[1]);break;case"mute":1===parseInt(i[1],10)?a.mute():a.unmute()}}catch(n){console.error("There was an error while parsing messages")}}})},addSkipButton:function(t){if(!t.parentNode)return!1;this.removeSkipButton(),this.skipButton=e.create("div",{"class":"skip-container"}),t.parentNode.appendChild(this.skipButton);var i=e.create("button",{"class":"skip-button"},{click:function(){parent.postMessage("amplive::do-skip","*")}}),n=e.create("div",{"class":"text"});n.innerText="Skip Ad",i.appendChild(n),this.skipButton.appendChild(i)},removeSkipButton:function(t){this.skipButton&&this.skipButton.parentNode&&this.skipButton.parentNode.removeChild(this.skipButton)},toggleMute:function(){if(this.ready){if(this.isMuted){var t=n.get();i.send("unmute",t),this.player.unmute()}else this.player.mute();return this.isMuted=!this.isMuted,this.isMuted}},getContent:function(t){var i=this;if(this.isLoadedTest())i.loadVideo(t);else{window.defineBackup=window.define,window.define=null;var n=e.create("script",{src:this.src});e.addEvent(n,"load",function(){setTimeout(function(){window.define=window.defineBackup,i.loadVideo(t)},100)}),console.log(n),this.parent.appendChild(n)}var s={id:this.targetId};return"medium_rectangle_pre_rec"===t.size&&(s.style="margin-top:-40px;!important"),"vpaid"===t.size&&(s.style="height:100%;margin-top:0px;!important"),e.create("div",s)},updateContent:function(){this.content&&this.loadVideo(this.key)}})}),define("app/views/states/assets/thumbBox/sources/Dacast",["./Script","app/helpers/DOM","app/helpers/CFC","app/helpers/Config"],function(t,e,i,n){return t.extend({targetId:"dacast",marginTop:0,src:"https://player.dacast.com/js/player.js",key:null,key_unmuted:null,content:null,isMuted:!0,ready:!1,verticalOffset:0,toPost:-1!==document.location.href.indexOf("?preview=true")?window:parent,roadblock:null,roadblocked:!1,isLoadedTest:function(){return!!window.dacast},getAttributes:function(t){return t},activate:function(t){"vpaid"===t.size&&(this.isMuted=!1),this.key=t.key,this.content=this.getContent(t),this.parent.appendChild(this.content),this.addControls(this.content)},loadVideo:function(t){var e=this.getSize(this.isUserInitiated?"userInitiated":"");this.player=dacast(t.key,this.targetId,{player:"jw7",jwParams:{repeat:!0,mute:!0},autoplay:"true",repeat:"true",jwUrl:"1Zs5WVcFxluQwBadFblcagiCinUU2+2IHHbsXG4mKsJ0jgrxWF/wzg==",width:e[0],height:e[1]}),console.log(this.player);var i=this;this.player.on("ready",function(){i.player.getPlayerInstance().setMute(i.isMuted),i.ready=!0}),this.size=e},addSkipButton:function(t){if(!t.parentNode)return!1;this.removeSkipButton(),this.skipButton=e.create("div",{"class":"skip-container"}),t.parentNode.appendChild(this.skipButton);var i=e.create("button",{"class":"skip-button"},{click:function(){parent.postMessage("amplive::do-skip","*")}}),n=e.create("div",{"class":"text"});n.innerText="Skip Ad",i.appendChild(n),this.skipButton.appendChild(i)},removeSkipButton:function(t){this.skipButton&&this.skipButton.parentNode&&this.skipButton.parentNode.removeChild(this.skipButton)},toggleMute:function(){if(this.ready){if(this.isMuted){var t=n.get();i.send("unmute",t)}return this.isMuted=!this.isMuted,this.player.getPlayerInstance().setMute(this.isMuted),this.isMuted}},getContent:function(t){var i=this,n={id:this.targetId,style:"margin-top:0px!important;"};"medium_rectangle_pre_rec"===t.size&&(n.style="margin-top:-40px;!important"),"dual_artwork_half_page_pre_rec"===t.size&&(n.style="margin-top:-40px;!important");var s=e.create("div",n);if(this.isLoadedTest())i.loadVideo(t);else{window.defineBackup=window.define,window.define=null;var a=e.create("script",{src:this.src});e.addEvent(a,"load",function(){setTimeout(function(){window.define=window.defineBackup,i.loadVideo(t)},100)}),this.parent.appendChild(a);
}return s},updateContent:function(){this.content&&this.loadVideo(this.key)}})}),define("app/views/states/assets/thumbBox/Sources",["./sources/Upload","./sources/UStream","./sources/Livestream","./sources/Livestreamnew","./sources/NowLive","./sources/Youtube","./sources/AolDemand","./sources/IFrame","./sources/JWPlayer","./sources/CustomEmbed","./sources/Stream","./sources/Dacast"],function(t,e,i,n,s,a,o,r,c,u,h,l){var d={livestream:i,livestreamnew:n,ustream:e,upload:t,nowlive:s,youtube:a,jwplayer:c,aoldemand:o,iframe:r,customembed:u,stream:h,dacast:l};return Class.extend({active:!1,sources:null,activeSource:null,init:function(t,e){this.name=t,this.parent=e,this.sources={}},setSource:function(t,e){if("none"===t)this.activeSource&&this.activeSource.deactivate();else{"upload"!==t&&"youtube"!==t||"vpaid"!==this._config.get("size")||(t="jwplayer");var i=this.getSource(t);-1!==i._config.get("size").indexOf("_static")?this.activeSource&&this.activeSource.deactivate():(this.activeSource&&this.activeSource.deactivate(),e.size=i._config.get("size"),this.activeSource=i,this.activeSource.activate(e),this.activeSourceData=e)}},getSource:function(t){if(!this.sources[t]){var e=d[t];e?(this.sources[t]=new e(t,this.parent),this.sources[t].tower(this._tower),this.sources[t].config(this._config)):console.log("Could not find Source Class for: ",t)}return this.sources[t]},activate:function(){this.activeSource&&this.activeSource.activate(this.activeSourceData),this.active=!0},deactivate:function(){this.activeSource&&this.activeSource.deactivate(),this.active=!1},tower:function(t){this._tower=t},config:function(t){this._config=t,this.activeSource&&this.activeSource.config(t)}})}),define("app/views/states/assets/ThumbBox",["../../View","./thumbBox/Sources"],function(t,e){return t.extend({isActive:null,sourceName:null,sourceData:null,init:function(t,i){this._super("thumb-"+t,i),this.name=t,this.sources=new e(t,this.el)},setActive:function(t){this.isActive!==t&&(t===!0&&this.activate(),t===!1&&this.deActivate(),this.isActive=t)},activate:function(){this.sources.setSource(this.sourceName,this.sourceData)},deActivate:function(){this.sources.deactivate()},config:function(t){t.hasChanged("video.source")&&(this.sourceName=t.get("video.source"),this.sourceData=t.get("video."+t.get("video.source")),this.isActive&&this.activate()),t.hasChanged("video.thumb")&&t.get("video.thumb")&&this.setStaticThumbUrl(t.getCFPath()+t.get("video.thumb")),this.sources.config(t)},tower:function(t){t.on("state.activated",function(t){t===this.name&&this.setActive(!0)},this),t.on("state.deactivated",function(t){t===this.name&&this.setActive(!1)},this),this.sources.tower(t)},setStaticThumbUrl:function(t){for(var e=document.getElementsByClassName("thumb"),i=0;i<e.length;i++)e[i].style.backgroundImage='url("'+t+'")'}})}),define("app/views/states/BannerD",["../View","./assets/Button","./assets/ThumbBox"],function(t,e,i){return t.extend({active:!1,init:function(t,n,s){this._subViews=[new e(t),new i(t)],this.titleEl=id(t+"-title"),this._super.apply(this,arguments)},data:function(t){var e=this.name,i=this.active,n=this.isActive(t),s=this._tower;i!==n&&(n?s.dispatch("state.activated",[e]):s.dispatch("state.deactivated",[e]),this.active=n),this._super.apply(this,arguments)},isActive:function(){return!1},processString:function(t){return t=t.split("/").join("<br/>"),t=t.replace(/\*([\S\s]+)\*/g,"<b>$1</b>"),t=t.replace(/\_([\S\s]+)\_/g,"<em>$1</em>")},config:function(t){this.titleEl.innerHTML=this.processString(t.get("strings")[this.name]),this._super(t)}})}),define("app/views/states/Mock",["./BannerD"],function(t){var e="mock",i=t.extend({isActive:function(t){return!0}});return new i(e,[])}),define("app/views/BannerData",["./View","./states/Mock"],function(t,e){var i=t.extend({tower:function(t){this._super.apply(this,arguments),t.on("state.activated",function(t){this.el.setAttribute("class","is-"+t)},this)}});return new i("banner-data",Array.prototype.slice.call(arguments,1))}),define("app/views/ArtworkGroup",["./View","../helpers/Config"],function(t,e){var i=t.extend({statePaths:{_static:null,live:null,prelive:null,postlive:null,mock:null},activeState:null,init:function(){this._super.apply(this,arguments),this.img=this.el.children[0]},tower:function(t){this._super.apply(this,arguments),t.on("state.activated",function(t){"live"!==t&&(t+="live"),this.activeState=t},this)},config:function(t){this._super.apply(this,arguments);var e=function(e){return t.get(e)};if(t.anyHasChanged(["cdn_bucket","cloudfront_domain","size","artwork.static","artwork.live","artwork.prelive","artwork.postlive","artwork.mock"])){var i=this,n=e("size"),s=t.getCFPath();["_static","live","prelive","postlive","mock"].forEach(function(t){var a=t.split("_").join("");e("artwork."+a)&&(i.statePaths[t]=s+e("artwork."+a)[n])})}"undefined"!=typeof this.statePaths._static&&null!==this.statePaths._static&&(this.img.src=this.statePaths._static)}});return new i("artwork")}),define("app/views/ArtworkTop",["./View","../helpers/DOM"],function(t,e){var i=t.extend({statePaths:{top:null,mock:null},init:function(){this._super.apply(this,arguments),this.img=this.el.children[0]},tower:function(t){this._super.apply(this,arguments),t.on("state.activated",function(t){"live"!==t&&(t+="live"),this.activeState=t},this)},config:function(t){this._super.apply(this,arguments);var e=function(e){return t.get(e)};if(t.anyHasChanged(["cdn_bucket","cloudfront_domain","size","artwork.top","artwork.live","artwork.prelive","artwork.postlive","artwork.mock"])){var i=this,n=e("size")+"_top",s=t.getCFPath();["top"].forEach(function(t){var a=t;if(e("artwork."+a)){var o=e("artwork."+a);i.statePaths[t]=s+o[n]}})}"undefined"!=typeof this.statePaths.top&&null!==this.statePaths.top&&(this.img.src=this.statePaths.top)}});return new i("artwork-top")}),define("app/views/Logo.js",["./View","../helpers/DOM"],function(t,e){var i=t.extend({init:function(){this._super.apply(this,arguments),this.img=this.el.children[0]},config:function(t){if(this._super(t),t.anyHasChanged(["cdn_bucket","cloudfront_domain","artwork.logo_enabled","artwork.logo"]))if("yes"==t.get("artwork.logo_enabled")){var e=t.get("size"),i=t.get("artwork.logo");if(!i||!i[e])return void console.log("Missing logo for current size!");var n=t.getCFPath()+i[e];this.img.src=n,this.el.style.display="block"}else this.el.style.display="none"}});return new i("logo")}),define("app/views/Style",["./View","../helpers/DOM"],function(t){var e=t.extend({config:function(t){t.hasChanged("styling.css")&&(this.el.textContent=t.get("styling.css"))}});return new e("style")}),define("app/views/PrerollBanner",["./View","../helpers/DOM"],function(t,e){var i=t.extend({init:function(){this._super.apply(this,arguments),this.img=this.el.children[0]},config:function(t){if(this._super(t),t.anyHasChanged(["cdn_bucket","cloudfront_domain","artwork.preroll"])){var e=t.get("size");if("vpaid"===e){var i=t.get("artwork.preroll");try{i=JSON.parse(i)}catch(n){i=null}if(!i||!i[e])return void console.log("Missing banner companion !");var s=t.getCFPath()+i[e];this.img.src=s,this.el.style.display="block"}else this.el.style.display="none"}}});return new i("prerollbanner")}),define("app/views/Master",["./View","./Border","./ExpandText","./ExpandArea","./HitArea","./HiddenAnimation","./BannerData","./ArtworkGroup","./ArtworkTop","./Logo.js","./Style","./PrerollBanner"],function(t,e,i,n,s,a,o,r,c,u,h,l){var d=t.extend({config:function(t){if(this._super(t),t.anyHasChanged(["size","language","layout"])){var e=[t.get("size"),t.get("language"),"mock"],i=t.get("video"),n=i[i.source];n&&"yes"==n.user_initiated_video&&e.push("user_initiated_video"),n&&n.key&&"yes"==n.key.user_initiated_video&&e.push("user_initiated_video"),this.el.setAttribute("class",e.join(" "))}this.lang.config(t)}});return new d("master",[i,n,e,s,a,o,r,c,u,h,l])}),define("app/models/Model",[],function(){var t;return{getData:function(){return t},setData:function(e){t=e}}}),define("app/managers/Tower",[],function(){var t={};return{init:function(){Array.prototype.forEach||console.warn("Browser does not support for each")},on:function(e,i,n){t[e]||(t[e]=[]),t[e].push({callback:i,scope:n})},dispatch:function(e,i){t[e]&&t[e].forEach(function(t){t.callback.apply(t.scope,i||[])})}}}),define("app/App",["./views/Master","./controller/MainController","./models/Model","./managers/Tower","./helpers/CFC","./helpers/Config","./helpers/Env","./managers/UUID","./managers/Tracking"],function(t,e,i,n,s,a,o,r,c){return{init:function(){r.init(!0),n.init(),e.init(n,t,i),s.init(n),a.init(n),o.init(n),c.init(n)}}}),requirejs(["app/App"],function(t){t.init()}),define("main",function(){});